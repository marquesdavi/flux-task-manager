<div class="bg-[#111a22] min-h-screen text-white font-sans">
  <div class="max-w-7xl mx-auto px-6 py-10">
    <h1 class="text-3xl font-bold mb-6">Seus Boards</h1>

    <div class="mb-8">
      @if (showNewInputSignal()) {
        <div class="flex flex-col md:flex-row gap-2 items-start md:items-center">
          <input
            id="newBoardInput"
            type="text"
            [value]="newBoardTitleSignal()"
            (input)="newBoardTitleSignal.set($any($event.target).value)"
            (keydown)="onNewBoardKeyDown($event)"
            placeholder="Digite o nome do novo board…"
            class="flex-1 bg-[#1f2933] border border-[#2e3a47] rounded px-3 py-2
                   text-white placeholder-[#93b0c8]
                   focus:outline-none focus:ring-2 focus:ring-[#007bff]"
          />
          <button
            (click)="createBoard()"
            class="bg-[#007bff] hover:bg-[#005bb5] text-white font-semibold px-4 py-2 rounded"
          >
            Create
          </button>
          <button
            (click)="cancelNewBoard()"
            class="ml-2 text-[#93b0c8] hover:text-white px-2 py-1"
          >
            Cancel
          </button>
        </div>
        @if (newBoardErrorSignal()) {
          <p class="text-red-500 text-sm mt-1">{{ newBoardErrorSignal() }}</p>
        }
      } @else {
        <button
          (click)="openNewBoardInput()"
          class="bg-[#1989e5] hover:bg-[#1567a8] text-white font-semibold px-4 py-2 rounded flex items-center"
        >
          <app-material-symbol size="18px">add</app-material-symbol>
          <span class="ml-2">Create new board</span>
        </button>
      }
    </div>

    @if (loadingSignal()) {
      <p class="text-[#93b0c8]">Carregando boards…</p>
    } @else {
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        @for (board of boardsSignal(); track board.id) {
          <div
            class="bg-[#161f29] rounded-lg shadow-md hover:shadow-lg transition-shadow relative group"
          >
            @if (editingIdSignal() === board.id) {
              <div class="p-4 flex flex-col gap-2">
                <input
                  id="editBoardInput-{{ board.id }}"
                  type="text"
                  [value]="editTitleSignal()"
                  (input)="editTitleSignal.set($any($event.target).value)"
                  (keydown)="onEditKeyDown($event, board)"
                  class="w-full bg-[#1f2933] border border-[#2e3a47] rounded px-3 py-2
                         text-white placeholder-[#93b0c8]
                         focus:outline-none focus:ring-2 focus:ring-[#007bff]"
                />
                <div class="flex gap-2">
                  <button
                    (click)="saveEdit(board)"
                    class="bg-[#007bff] hover:bg-[#005bb5] text-white px-3 py-1 rounded"
                  >
                    Save
                  </button>
                  <button
                    (click)="cancelEditing()"
                    class="text-[#93b0c8] hover:text-white px-2 py-1"
                  >
                    Cancel
                  </button>
                </div>
                @if (editErrorSignal()) {
                  <p class="text-red-500 text-sm mt-1">{{ editErrorSignal() }}</p>
                }
              </div>
            } @else {
              <div
                (click)="goToBoard(board)"
                class="px-4 py-6 cursor-pointer"
              >
                <h2 class="text-xl font-semibold">{{ board.title }}</h2>
              </div>

              <div
                class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex space-x-2"
              >
                <button
                  (click)="startEditing(board); $event.stopPropagation()"
                  class="bg-[#374151] hover:bg-[#4b5563] text-[#93b0c8] p-1 rounded"
                  title="Rename"
                >
                  <app-material-symbol size="18px">edit</app-material-symbol>
                </button>
                <button
                  (click)="deleteBoard(board.id); $event.stopPropagation()"
                  class="bg-[#5c1515] hover:bg-[#7d1f1f] text-white p-1 rounded"
                  title="Delete"
                >
                  <app-material-symbol size="18px">delete</app-material-symbol>
                </button>
              </div>
            }
          </div>
        } @empty {
          <p class="text-[#93b0c8] col-span-full">Você ainda não tem nenhum board.</p>
        }
      </div>
    }
  </div>
</div>
